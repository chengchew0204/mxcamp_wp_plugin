<!-- wp:html --><br>
<h4 class="slide-title">AMIGOS NOBLES / NOBLE FRIENDS</h4>
<!-- /wp:html -->

<!-- wp:html -->
<hr><hr>Algunos creen que la mayor mejora de la vida proviene de la práctica de la meditación.<hr><hr>Nosotros anfitrión una práctica diaria de meditación de 20 minutos a las 7:30 AM. Te invitamos a unirte a una práctica diaria de meditación comunitaria.<hr><hr>
Esta no es una clase ni una sesión guiada, sino una oportunidad colectiva para reunirnos y sentarnos juntos en silencio.<hr><hr>

<h4>Para SRC:</h4> DM @campmx a <a href="https://www.instagram.com/campmx/" target="_blank"><b><u>Instagram</font></b></u></a> o <a href="https://www.facebook.com/campmx.page" target="_blank"><b><u>Facebook</font></b></u></a><hr><hr>

<h4>Qué esperar:</h4>
Comenzaremos puntualmente a las 7:30 a. m. todos los días. El formato es sencillo:<hr><hr>

•　20 minutos de meditación silenciosa<br>
•　una suave campanada indicará el inicio y el final de la sesión<br>
•　después de la campanada, quienes necesiten retirarse podrán hacerlo en silencio.<hr><hr>

<h4>Círculo de Intercambio Opcional:</h4>
Para quienes deseen quedarse, se abrirá un espacio para un breve intercambio grupal opcional. Esta es una oportunidad para compartir desde su experiencia en la práctica, pero no hay presión para participar.<hr><hr>

<h4>Dónde:</h4>
CAMP, Calle las Casitas 61 (o 51), Playa Zipolite, 70947 Arroyo Tres, Oaxaca, Mexico <a href="https://maps.app.goo.gl/4GLyPNkCUBTFear68" target="_blank"><b>(<u>mapa</u>)</b></font></a><hr><hr>

<h4>Cuándo:</h4>
Todos los días a las 7:30 a. m.<hr><hr>

<h4>Qué traer:</h4>
(Nada) Se proporcionan cojines, zabutons y bancos de meditación, y también hay sillas disponibles.<hr><hr>

<h4>Precio:</h4>
Gratuito<hr><hr><hr><hr><hr><hr>

Esperamos con ansias sentarnos contigo.<hr>

<b>CAMP</b> (Centro de Arte, Movimiento y Paz)<hr><hr><hr><hr>

<h4>¿Qué es la meditación?</h4>
La meditación es una práctica de entrenamiento mental, similar a cómo se entrena el cuerpo mediante el ejercicio físico. Implica técnicas para enfocar la atención y la consciencia para alcanzar un estado de claridad mental y tranquilidad emocional. Existen numerosas formas de meditación, pero muchas comparten el objetivo común de ayudar a estar más presente y menos reactivo al flujo constante de pensamientos que a menudo llenan nuestra mente. No se trata de detener los pensamientos, sino de observarlos sin juzgarlos.<hr><hr><hr>

<div class="video-wrap">
  <video class="lazy-video" width="500" controls preload="metadata" playsinline webkit-playsinline controlsList="nodownload" data-src="https://camp.mx/wp-content/uploads/khandro.m4v">
  </video>
  <div class="video-placeholder">Cargando video...</div>
</div><hr><hr>
　
<h4>¿Cómo meditar?</h4>
　
<div class="video-wrap">
  <video class="lazy-video" width="500" controls preload="metadata" playsinline webkit-playsinline controlsList="nodownload" data-src="https://camp.mx/wp-content/uploads/meditacion.mp4">
  </video>
  <div class="video-placeholder">Cargando video...</div>
</div><hr><hr>
　
<h4>Cómo detener la mente del mono.</h4>

<div class="video-wrap">
  <video class="lazy-video" width="500" controls preload="metadata" playsinline webkit-playsinline controlsList="nodownload" data-src="https://camp.mx/wp-content/uploads/Moojiji.m4v">
  </video>
  <div class="video-placeholder">Cargando video...</div>
</div><hr><hr>
</p>
<!-- /wp:html -->

<!-- wp:html --><hr />
<div> </div>

<style>
.video-wrap {
  position: relative;
  display: inline-block;
  max-width: 100%;
  /*background-color: #f0f0f0;*/
  /*border: 1px solid #ddd;*/
  /*border-radius: 4px;*/
}

.video-wrap video {
  display: block;
  width: 100%;
  height: auto;
  pointer-events: auto;
}

.video-placeholder {
  position: absolute;
  inset: 0;
  display: grid;
  place-items: center;
  color: #666;
  font-size: 16px;
  pointer-events: none;
  z-index: -1;
  /*background-color: rgba(240, 240, 240, 0.9);*/
}

.lazy-video.loading {
  opacity: 0.7;
}

.lazy-video.loaded + .video-placeholder {
  display: none;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // Función para pausar todos los videos en este post
  function pauseAllVideos() {
    const allVideos = document.querySelectorAll('video');
    allVideos.forEach(video => {
      if (!video.paused) {
        video.pause();
        console.log('Video pausado:', video.src || video.querySelector('source')?.src);
      }
    });
  }
  
  // Escuchar eventos de cierre de tarjeta (método de respaldo)
  const slideElement = document.querySelector('.slide_10');
  if (slideElement) {
    // Usar MutationObserver para detectar cuando el slide obtiene la clase 'closed'
    const observer = new MutationObserver(function(mutations) {
      mutations.forEach(function(mutation) {
        if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
          const target = mutation.target;
          if (target.classList.contains('closed')) {
            console.log('Tarjeta de meditación cerrada, pausando videos');
            pauseAllVideos();
          }
        }
      });
    });
    
    observer.observe(slideElement, {
      attributes: true,
      attributeFilter: ['class']
    });
  }
  
  // Lazy loading para videos usando Intersection Observer
  const lazyVideos = document.querySelectorAll('.lazy-video');
  
  // Asegurar atributos esenciales para Safari
  lazyVideos.forEach(video => {
    video.setAttribute('controls', '');
    video.setAttribute('playsinline', '');
    video.setAttribute('webkit-playsinline', '');
    video.setAttribute('controlsList', 'nodownload');
    video.setAttribute('preload', 'metadata');
    
    // Safari-específico: Asegurar que el video esté listo para interacción
    video.addEventListener('loadstart', () => {
      console.log('Evento loadstart del video disparado');
    });
    
    video.addEventListener('canplay', () => {
      console.log('El video puede reproducirse - controles Safari deberían estar listos');
      // Forzar mostrar los controles del video
      video.controls = true;
    });
  });
  
  if ('IntersectionObserver' in window) {
    const videoObserver = new IntersectionObserver((entries, observer) => {
      entries.forEach(entry => {
        if (!entry.isIntersecting) return;
        
        const video = entry.target;
        if (video.__hydrated) { 
          observer.unobserve(video); 
          return; 
        }
        
        const dataSrc = video.dataset.src;
        if (dataSrc) {
          video.classList.add('loading');
          
          // Safari funciona mejor con asignación directa de src
          video.src = dataSrc;
          video.removeAttribute('data-src');
          
          // Marcar como cargado una vez que se cargan los metadatos
          video.addEventListener('loadedmetadata', () => {
            video.classList.remove('loading');
            video.classList.add('loaded');
            
            // Safari-específico: Forzar controles a ser interactivos
            setTimeout(() => {
              video.controls = true;
              console.log('Safari: Reactivación forzada de controles para:', video.src);
            }, 100);
          }, { once: true });
          
          // Safari-específico: Agregar manejador de clic como respaldo
          video.addEventListener('click', (e) => {
            // Solo manejar si se hace clic directamente en el video, no en los controles
            if (e.target === video) {
              if (video.paused) {
                video.play();
              } else {
                video.pause();
              }
              console.log('Manejador de clic de respaldo Safari activado');
            }
          });
          
          video.load();
          video.__hydrated = true;
          observer.unobserve(video);
        }
      });
    }, {
      // Cargar video cuando esté a 100px de entrar al viewport
      rootMargin: '100px'
    });
    
    lazyVideos.forEach(video => {
      videoObserver.observe(video);
    });
  } else {
    // Fallback para navegadores sin soporte de IntersectionObserver
    lazyVideos.forEach(video => {
      const dataSrc = video.dataset.src;
      if (dataSrc) {
        video.src = dataSrc;
        video.removeAttribute('data-src');
        video.classList.add('loaded');
        video.load();
      }
    });
  }
  
  // Pausar todos los videos al salir de la página o cambiar pestañas
  function pauseAllOnExit() {
    document.querySelectorAll('video').forEach(video => {
      if (!video.paused && !video.ended) {
        try { video.pause(); } catch(e) {}
      }
    });
  }
  
  document.addEventListener('visibilitychange', () => { 
    if (document.hidden) pauseAllOnExit(); 
  });
  window.addEventListener('pagehide', () => pauseAllOnExit());
});
</script>
